# act3.3
#3a ETAPA: panel d’administració.Creareu un panel per a la gestió d’ofertes i d’empreses. 1-. Començareu per les ofertes: crear una pàgina que mostri totes lesofertes de la BD i els butons d’afegir, modificar i eliminar, de moment sensefuncionalitat.•Crear controlador AdminOfertaController en una subcarpeta admin:php bin/console make:controller admin'\'AdminOfertaController•Comprovar la creació del controlador i de la plantilla corresponent.•Afegir a la barra de navegació el link de la ruta del nou controlador.•Programar el controlador i la plantilla perquè en clicar Admin mostri totes les ofertes de la BD amb els botons propis de l’administrador afegir, modificar i eliminar.
2-. Doneu funcionalitat als botons, començarem pel botó modificar.•Crear la funció function modifOferta(Oferta $oferta)que rebrà l’id de l’oferta que es vol modificar@Route("/admin/oferta/{id}", name="admin_oferta_modif")•Crear la plantilla que renderitzarà l’oferta recuperada modifOferta.html.twig•Modificar el botó de la twig d’administració:<a class = "btn btn-secondary" href="{{path("admin_oferta_modif", {'id' : oferta.id})}}">Modificar</a>•Crear el formulari que permetrà la modificacióphp bin/console make:form OfertaTypedels objectes de la classe Oferta.•Comprovar la creació i les funcionspublic function buildForm(FormBuilderInterface $builder, array $options): crea un formulari amb totes les propietats de la classe.•Modificar la funció perquè cregui el formulari, amb les dades de l’oferta $form = $this→createForm(OfertaType::class, $oferta);i l’envii a la plantillareturn $this→render('admin/modifOferta.html.twig', ["oferta" => $oferta,"form" => $form-> createView()])•Moficar la plantilla perquè mostri el formulari bàsic•Comprovar que funciona, de posar-lo bonic sempre estem a temps.
Tens un error? Si sí, prova de trobar la causa.•Afegir un botó per guardar els canvis. On? En la plantilla<input type="submit" class = "btn btn-primary" value="Guardar">•Tratar el formulari actualitzant la BD a partir del formulari◦Necessitem la petició i el manager de doctrine:public function modifOferta(Oferta $oferta, Request $request, ObjectManager $manager)◦Comprobar si el formulari ha estat tractat:$form->handleRequest($request);◦Si és vàlid, apliquem els canvis en la BD i redireccionem.◦Comprobar els canvis3-.  Donar funcionalitat al botó afegir i al botó eliminar.
